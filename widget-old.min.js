(()=>{var c=()=>{let t={apiKey:"AIzaSyArCDE83F6fnSapepCsGIk8uJ8UQNANS0c",authDomain:"fohn-demo.firebaseapp.com",projectId:"fohn-demo",storageBucket:"fohn-demo.appspot.com",messagingSenderId:"141055045592",appId:"1:141055045592:web:e325237a8e9352d2714cad"};return firebase.initializeApp(t),{db:firebase.firestore()}},p=async({db:t,collectionName:e,id:a})=>(await t.collection(e).doc(a).get()).data();var u=({salonReservationPrice:t,shadowNode:e})=>{let a=e.querySelector(".widget-content"),i=e.querySelector(".widget"),d=e.querySelector("#modalBackdrop"),r=e.querySelector("#modal-price"),l=e.querySelector("#modal-date"),n=new Array(4).fill(null).map((o,s)=>({date:`${new Date().getDay()+s}.${new Date().getMonth()}.${new Date().getFullYear()}`,price:`${t},-`,originalPrice:"889,-"}));a.innerHTML=n.map(o=>`
              <div class="card">
                <p class="widget-card-date"><strong>${o.date}</strong></p>
                <p>GJELDENE DAGPRIS AKKURAT N\xC5:</p>
                <p class="price">${o.price}</p>
                <p>ord.pris <del>${o.originalPrice}</del></p>
                <button class="reserve-btn" data-date="${o.date}" data-price="${o.price}">Reserver Pris</button>
              </div>
            `).join(""),e.querySelectorAll(".reserve-btn").forEach(o=>{o.addEventListener("click",s=>{let x=s.target.dataset.date,y=s.target.dataset.price;i.style.display="none",d.style.display="flex",r.textContent=y,l.textContent=x})})};var g=({shadowNode:t,selectedSalonName:e,salonNames:a})=>{let i=t.querySelector(".custom-select"),d=t.querySelector(".selected-option"),r=t.querySelector(".select-options"),l=t.querySelector(".select-trigger");r.innerHTML=a.map(o=>`<li class="option${o===e?" selected":""}">${o}</li>`).join(""),d.textContent=e;let n=t.querySelectorAll(".option");n.forEach(o=>{o.addEventListener("click",()=>{n.forEach(s=>s.classList.remove("selected")),o.classList.add("selected"),d.textContent=o.textContent,i.classList.remove("active")})}),l.addEventListener("click",()=>{i.classList.toggle("active")}),t.addEventListener("click",o=>{i.contains(o.target)||i.classList.remove("active")})};var b=t=>({primaryColor:t?.primaryColor||"#d5b154",background:{default:t?.background?.default||"#201906",4:t?.background?.["4"]||"rgba(255, 255, 255, 0.04)",10:t?.background?.["10"]||"rgba(255, 255, 255, 0.1)",15:t?.background?.["15"]||"rgba(213, 177, 84, 0.15)",50:t?.background?.["50"]||"rgba(0, 0, 0, 0.5)",80:t?.background?.["80"]||"rgba(36, 28, 8, 0.8)"},textColor:{default:t?.textColor?.default||"white",placeholder:t?.textColor?.placeholder||"#776e60",80:t?.textColor?.["80"]||"rgba(255,255,255,0.8)"},fontSize:{default:t?.fontSize?.default||"15",24:"24"},lineHeight:{default:t?.lineHeight?.default||"20",32:"32"},borderRadius:{default:t?.borderRadius?.default||"12",sm:t?.borderRadius?.sm||"4"}});var m=t=>{let e=b(t);return`
        button {
            border: none;
            padding: 10px 20px;
            border-radius: ${e.borderRadius.default}px;
            font-size: ${e.fontSize.default}px;
            line-height: ${e.lineHeight.default}px;
            cursor: pointer;
        }

        .widget-toggle-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: ${e.primaryColor};
            color: ${e.textColor.default};
            z-index: 1000;
        }

        .widget-close-button {
            background-color: ${e.background[15]};
            color: ${e.textColor.default};
        }

        .custom-select {
            position: relative;
            display: inline-block;
            background-color: ${e.background.default};
            color: ${e.textColor.default};
            min-width: 150px;
            border-radius: ${e.borderRadius.default}px;
            overflow: visible;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .select-trigger {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: inherit;
            color: inherit;
            min-width: 150px;
        }

        .select-options {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: ${e.background.default};
            color: ${e.textColor.default};
            margin: 0;
            margin-top: 8px;
            padding: 0;
            list-style: none;
            opacity: 0; 
            visibility: hidden; 
            transform: translateY(-10px);
            transition: all 0.3s ease; 
            z-index: 1000;
            border-radius: ${e.borderRadius.default}px;
        }

        .option.selected {
            background-color: ${e.background[15]};
            color: ${e.textColor.default};
        }

        .select-options .option {
            padding: 10px 20px;
            cursor: pointer;
        }

        .select-options .option:hover {
            background-color: ${e.background[15]};
        }

        .custom-select.active .select-options {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .arrow {
            margin-left: 4px;
        }

        ::-webkit-scrollbar {
            width: 4px;
            height: 4px;
            border-radius: ${e.borderRadius.sm}px;
        }
        ::-webkit-scrollbar-thumb {
            background: ${e.background[10]};
            border-radius: ${e.borderRadius.sm}px;
        }
        ::-webkit-scrollbar-corner {
            background: transparent;
        }

        .widget {
            display: none;
            position: fixed;
            bottom: 70px;
            right: 20px;
            width: 100%;
            max-width: 300px;
            height: 80vh;
            max-height: 600px;
            background: ${e.background[80]};
            border-radius: ${e.borderRadius.default}px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .widget-header {
            display: flex;
            color: white;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
        }

        .card {
            padding: 16px;
            background: ${e.background[4]};
            text-align: center;
            color: white;
            border-radius: ${e.borderRadius.default}px;
            margin-bottom: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .card .price {
            font-size: ${e.fontSize[24]}px;
            line-height: ${e.lineHeight[32]}px;
            font-weight: 700;
            color: ${e.primaryColor};
        }
        .reserve-btn {
            margin-top: 12px;
            background: ${e.primaryColor};
            width: 100%;
            color: ${e.textColor.default};
        }
        .widget-content {
            padding: 12px;
            overflow-y: auto;
            gap: 12px;
            height: calc(100% - 88px);
        }
        .widget-card-date {
            margin-top: 0;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: ${e.background[50]};
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
        }
        /* Modal container */
        .modal {
            background-color: ${e.background.default};
            padding: 20px;
            border-radius: ${e.borderRadius.default}px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
        }
        /* Header */
        .modal-header {
            color: ${e.textColor[80]};
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
        }
        .modal-description {
            margin-bottom: 24px;
            color: ${e.textColor[80]};
        }
        .modal-additional-text {
            text-align: center;
            color: ${e.primaryColor};
        }
        /* Form */
        .modal-body {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .modal-body label {
            font-size: ${e.fontSize.default}px;
            line-height: ${e.lineHeight.default}px;
            margin-bottom: 4px;
        }

        .modal-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
        }

        .save-button {
            background-color: ${e.primaryColor};
            color: ${e.textColor.default};
        }

        .input-label {
            display: block;
            color: ${e.textColor[80]};
            font-size: ${e.fontSize.default}px;
            line-height: ${e.lineHeight.default}px;
            margin-bottom: 8px;
        }

        .input {
            width: -webkit-fill-available;
            background-color: ${e.background[10]};
            border: none;
            border-radius: ${e.borderRadius.default}px;
            color: ${e.textColor[80]};
            padding: 8px 12px;
            font-size: ${e.fontSize.default}px;
            line-height: ${e.lineHeight.default}px;
            outline: none;
        }

        input::placeholder {
            color:${e.textColor.placeholder};
        }`};var f=()=>{let t=document.createElement("div");document.body.appendChild(t);let e=t.attachShadow({mode:"open"}),a=m(window.dayPriceWidgetTheme);e.innerHTML=`
        <style>${a}</style>
        
        <div class="widget">
            <div class="widget-header">
                <div class="custom-select">
                <button class="select-trigger">
                    <div class="selected-option">Chain Admin</div>
                    <span class="arrow">&#9662;</span>
                </button>
                <ul class="select-options">
                    <li class="option">Chain Admin</li>
                    <li class="option">Chain Level</li>
                    <li class="option">Manager</li>
                    <li class="option">Employee</li>
                </ul>
                </div>
                <button id="widget-close-button" class="widget-close-button">Close</button>
            </div>
            <div class="widget-content"></div>
            </div>
            <div id="modalBackdrop" class="modal-backdrop" style="display: none">
            <div class="modal">
                <div class="modal-header">
                <div>
                    <div>
                    <span>Dato: </span>
                    <span id="modal-date"></span>
                    </div>
                    <div>
                    <span>Siste oppstart: kl. 14.00</span>
                    </div>
                </div>

                <div>
                    <span>Dagpris: </span>
                    <span id="modal-price"></span>
                </div>
                </div>

                <div class="modal-description">
                Din Dagpris blir n\xE5 reservert, men du er f\xF8rst garantert ledig time n\xE5r
                timen er bestilt (neste steg).
                </div>

                <div class="modal-body">
                <div>
                    <div class="input-label">Name:</div>
                    <input type="text" class="input" placeholder="Enter your name" />
                </div>

                <div>
                    <div class="input-label">Phone:</div>
                    <input
                    type="tel"
                    class="input"
                    placeholder="Enter phone number in format +47XXXXXXXX"
                    pattern="+47[0-9]{8}"
                    />
                </div>
                <p class="modal-additional-text">
                    Du vil n\xE5 motta en sms med videre instrukser.
                </p>
                </div>
                <div class="modal-actions">
                <button id="cancelButton" class="widget-close-button">Cancel</button>
                <button id="saveButton" class="save-button">OK</button>
                </div>
            </div>
        </div>
        <button id="widget-toggle-button" class="widget-toggle-button">Open</button>`;let i=e.querySelector("#modalBackdrop"),d=e.querySelector("#cancelButton"),r=e.querySelector("#widget-toggle-button"),l=e.querySelector("#widget-close-button"),n=e.querySelector(".widget");return r.addEventListener("click",()=>{n.style.display="block"}),l.addEventListener("click",()=>{n.style.display="none"}),d.addEventListener("click",()=>{i.style.display="none"}),i.addEventListener("click",o=>{o.target===i&&(i.style.display="none")}),e};(function(){function t(){let e=f();console.log("start");let a=document.createElement("script");a.src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js",e.appendChild(a);let i=document.createElement("script");i.src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js",e.appendChild(i),a.onload=()=>{i.onload=async()=>{let{db:d}=c(),r=await p({db:d,collectionName:"dayPrices",id:"a9XSDat68cb1pxmwPCzg"}),l=Object.entries(r.dayPriceConfig),n=Object.values(r.dayPriceConfig[l[0][0]])[0];u({shadowNode:e,salonReservationPrice:n}),g({shadowNode:e,selectedSalonName:l[0][0],salonNames:Object.keys(r.dayPriceConfig)})}}}window.addEventListener("load",t)})();})();
